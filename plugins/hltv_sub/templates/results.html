{% extends "base.html" %}

{% block title %}HLTV Results{% endblock %}

{% block extra_styles %}
.result-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.result-item {
    display: flex;
    align-items: center;
    background: rgba(40, 40, 60, 0.8);
    border-radius: 8px;
    padding: 12px 15px;
    border-left: 3px solid #9b59b6;
}

.result-date {
    min-width: 80px;
    text-align: center;
    font-size: 13px;
    color: #888;
}

.result-teams {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    margin: 0 15px;
}

.team {
    flex: 1;
    text-align: center;
}

.team-name {
    font-size: 15px;
    font-weight: 500;
    color: #fff;
}

.team-name.winner {
    color: #27ae60;
}

.team-name.loser {
    color: #888;
}

.score {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 20px;
    font-weight: 700;
}

.score-value {
    min-width: 25px;
    text-align: center;
}

.score-value.winner {
    color: #27ae60;
}

.score-value.loser {
    color: #888;
}

.score-separator {
    color: #555;
}

.result-info {
    min-width: 80px;
    text-align: right;
}

.result-id {
    font-family: 'Consolas', monospace;
    font-size: 11px;
    color: #555;
}

.event-group {
    margin-bottom: 20px;
}

.event-group-title {
    font-size: 14px;
    font-weight: 500;
    color: #ff9800;
    margin-bottom: 10px;
    padding-left: 10px;
    border-left: 3px solid #ff9800;
}

.empty-message {
    text-align: center;
    padding: 40px 20px;
    color: #666;
    font-size: 14px;
}

.tip {
    margin-top: 15px;
    padding: 12px 15px;
    background: rgba(155, 89, 182, 0.1);
    border-radius: 8px;
    border-left: 3px solid #9b59b6;
    font-size: 13px;
    color: #ccc;
}
{% endblock %}

{% block content %}
<div class="header">
    <div class="header-icon">R</div>
    <div>
        <div class="header-title">比赛结果</div>
        <div class="header-subtitle">已订阅赛事的已完成比赛</div>
    </div>
</div>

{% for event_name, results in results_by_event.items() %}
<div class="event-group">
    <div class="event-group-title">{{ event_name }}</div>
    <div class="result-list">
        {% for result in results %}
        {% set score1 = result.score1|int %}
        {% set score2 = result.score2|int %}
        {% set team1_won = score1 > score2 %}
        <div class="result-item">
            <div class="result-date">{{ result.date }}</div>
            <div class="result-teams">
                <div class="team">
                    <div class="team-name {% if team1_won %}winner{% else %}loser{% endif %}">
                        {{ result.team1 }}
                    </div>
                </div>
                <div class="score">
                    <span class="score-value {% if team1_won %}winner{% else %}loser{% endif %}">{{ result.score1 }}</span>
                    <span class="score-separator">:</span>
                    <span class="score-value {% if not team1_won %}winner{% else %}loser{% endif %}">{{ result.score2 }}</span>
                </div>
                <div class="team">
                    <div class="team-name {% if not team1_won %}winner{% else %}loser{% endif %}">
                        {{ result.team2 }}
                    </div>
                </div>
            </div>
            <div class="result-info">
                <div class="result-id">#{{ result.id }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endfor %}

{% if not results_by_event %}
<div class="empty-message">
    暂无比赛结果<br>
    <small>请先订阅赛事</small>
</div>
{% endif %}

<div class="tip">
    发送 <code>stats [比赛ID]</code> 查看比赛详细数据
</div>
{% endblock %}
